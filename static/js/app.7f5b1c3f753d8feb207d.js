webpackJsonp([1],{"+yLu":function(t,e){},AV0J:function(t,e){},Jq5M:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("/xf8"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("C7Lr")({name:"App"},i,!1,function(t){n("VotE")},null,null).exports,o=n("KGCO"),r=n("3cXf"),c=n.n(r),l={name:"PublicIndex",data:function(){return{serverIP:"",connecting:!1,visible:!1,defaultServerIP:"127.0.0.1"}},mounted:function(){},methods:{judgeReg:function(){},competitorReg:function(){this.$router.push("/competitor")},onClick:function(){this.connecting=!0,this.serverIP=0===this.serverIP.length?this.defaultServerIP:this.serverIP,this.connectHandler()},connectHandler:function(){var t=this;WS=new WebSocket("ws://"+this.serverIP+":2000"),WS.onopen=function(){t.connecting=!1,t.visible=!0,setInterval(function(){WS.send(c()({code:0,data:null}))},3e4)},WS.onerror=function(){t.connecting=!1,t.$error({title:"连接失败",content:"请检查网络连接状态或IP是否正确",maskClosable:!0})},WS.onmessage=function(e){var n=JSON.parse(e.data);1===n.code&&t.$info({title:"通知",content:n.data,maskClosable:!0})},WS.onclose=function(){t.$error({title:"警告",content:"与服务器的连接断开",maskClosable:!1,onOk:function(){window.location.href="/"}})}}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[t._m(0),t._v(" "),n("div",[n("a-input",{attrs:{placeholder:t.defaultServerIP,size:"large",disabled:t.connecting},on:{pressEnter:t.onClick},model:{value:t.serverIP,callback:function(e){t.serverIP=e},expression:"serverIP"}}),t._v(" "),n("a-button",{staticStyle:{"margin-top":"20px"},attrs:{block:"",type:"primary",loading:t.connecting,size:"large"},on:{click:t.onClick}},[t._v("\n      "+t._s(t.connecting?"连接中":"确认")+"\n    ")])],1),t._v(" "),n("a-modal",{attrs:{title:"身份选择：",footer:null,maskClosable:!1},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("div",{staticStyle:{margin:"20px 0"}},[n("a-button",{attrs:{block:"",type:"primary",size:"large"},on:{click:t.competitorReg}},[t._v("\n        我是选手\n      ")]),t._v(" "),n("a-button",{staticStyle:{"margin-top":"20px"},attrs:{block:"",type:"primary",size:"large"},on:{click:t.judgeReg}},[t._v("\n        我是评委\n      ")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-bottom":"20px"}},[e("span",{staticStyle:{"font-size":"18px","font-weight":"bold"}},[this._v("设置服务器地址：")])])}]};var h=n("C7Lr")(l,d,!1,function(t){n("p8Ud")},"data-v-688ce678",null).exports,v=(n("Wn42"),{name:"WritingBoard",data:function(){return{canvas:"",isEraser:!1}},mounted:function(){this.initBoard(),document.body.style.overflow="hidden"},methods:{saveIMG:function(){WS.send(c()({code:1,data:this.canvas.saveAsImg()}))},eraserClick:function(){this.isEraser=!this.isEraser,this.isEraser?(this.$set(this.canvas.option,"writeColor","white"),this.$set(this.canvas.option,"writeWidth","50")):(this.$set(this.canvas.option,"writeColor","#000"),this.$set(this.canvas.option,"writeWidth","10"))},initBoard:function(){this.canvas=new function(t,e){var n=this;this.canvas=document.getElementById(t);var s={canvas:this.canvas,context:this.canvas.getContext("2d"),isWrite:!1,lastWriteTime:-1,lastWriteSpeed:0,lastWriteWidth:0,canvasWidth:600,canvasHeight:600,isShowBorder:!0,bgColor:"#fff",borderWidth:2,borderColor:"#fff",lastPoint:{},writeWidth:2,maxWriteWidth:30,minWriteWidth:1,writeColor:"#000",isWriteName:!1};for(var i in e)s[i]=e[i];this.setLineWidth=function(){var t=(new Date).getTime(),e=t-s.lastWriteTime;s.lastWriteTime=t;var n=s.minWriteWidth+(s.maxWriteWidth-s.minWriteWidth)*e/30;n<s.minWriteWidth?n=s.minWriteWidth:n>s.maxWriteWidth&&(n=s.maxWriteWidth),n=n.toFixed(2),s.isWriteName?s.context.lineWidth=s.writeWidth:s.context.lineWidth=s.lastWriteWidth=s.lastWriteWidth/4*3+n/4},this.writing=function(t){s.context.beginPath(),s.context.moveTo(s.lastPoint.x,s.lastPoint.y),s.context.lineTo(t.x,t.y),n.setLineWidth(),s.context.stroke(),s.lastPoint=t,s.context.closePath()},this.writeContextStyle=function(){s.context.beginPath(),s.context.strokeStyle=s.writeColor,s.context.lineCap="round",s.context.lineJoin="round"},this.writeBegin=function(t){s.isWrite=!0,s.lastWriteTime=(new Date).getTime(),s.lastPoint=t,n.writeContextStyle()},this.writeEnd=function(){s.isWrite=!1},this.canvasClear=function(){if(s.context.save(),s.context.strokeStyle="#fff",s.context.clearRect(0,0,s.canvasWidth,s.canvasHeight),s.isShowBorder&&0!==s.borderWidth){s.context.beginPath();var t=s.borderWidth/2;s.context.moveTo(t,t),s.context.lineTo(s.canvasWidth-t,t),s.context.lineTo(s.canvasWidth-t,s.canvasHeight-t),s.context.lineTo(t,s.canvasHeight-t),s.context.closePath(),s.context.lineWidth=s.borderWidth,s.context.strokeStyle=s.borderColor,s.context.stroke(),s.isWriteName||(s.context.moveTo(0,0),s.context.lineTo(s.canvasWidth,s.canvasHeight),s.context.lineTo(s.canvasWidth,s.canvasHeight/2),s.context.lineTo(s.canvasWidth,s.canvasHeight/2),s.context.lineTo(0,s.canvasHeight/2),s.context.lineTo(0,s.canvasHeight),s.context.lineTo(s.canvasWidth,0),s.context.lineTo(s.canvasWidth/2,0),s.context.lineTo(s.canvasWidth/2,s.canvasHeight),s.context.stroke())}s.context.restore()},this.saveAsImg=function(){var t=new Image;if(t.src=this.canvas.toDataURL("image/png",.5),t.src!=this.emptyCanvas)return t.src;alert("请先书写")},this.canvasInit=function(){this.canvas.width=s.canvasWidth,this.canvas.height=s.canvasHeight,this.emptyCanvas=this.canvas.toDataURL("image/png")},this.canvas.addEventListener("mousedown",function(t){var e={x:t.offsetX||t.clientX,y:t.offsetY||t.clientY};n.writeBegin(e)}),this.canvas.addEventListener("mouseup",function(t){var e={x:t.offsetX,y:t.offsetY};n.writeEnd(e)}),this.canvas.addEventListener("mouseleave",function(t){var e={x:t.offsetX,y:t.offsetY};n.writeEnd(e)}),this.canvas.addEventListener("mousemove",function(t){if(s.isWrite){var e={x:t.offsetX,y:t.offsetY};n.writing(e)}}),this.canvas.addEventListener("touchstart",function(t){var e=t.targetTouches[0],s={x:e.pageX||e.clientX,y:e.pageY||e.clientY};n.writeBegin(s)}),this.canvas.addEventListener("touchend",function(t){var e=t.changedTouches[0],s={x:e.pageX,y:e.pageY};n.writeEnd(s)}),this.canvas.addEventListener("touchmove",function(t){var e=t.targetTouches[0],s={x:e.pageX,y:e.pageY};n.writeEnd(s)}),this.canvas.addEventListener("touchmove",function(t){var e=t.targetTouches[0],s={x:e.pageX,y:e.pageY};n.writing(s)}),this.canvasInit(),this.canvasClear(),this.option=s,s.control={clearCanvas:n.canvasClear}}("canvas",{canvasWidth:document.body.clientWidth-40,canvasHeight:document.body.clientHeight-100,borderWidth:0,writeWidth:10,borderColor:"black",isWriteName:!0})}},beforeDestroy:function(){document.body.style.overflow="auto"}}),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("canvas",{staticStyle:{"box-shadow":"0 0 5px #c2c2c2"},attrs:{id:"canvas"}},[t._v("\n    您的浏览器不支持canvas技术,请升级浏览器!\n  ")]),t._v(" "),n("div",{staticClass:"btn-div"},[n("a-button",{staticStyle:{width:"120px"},attrs:{size:"large",type:"primary"},on:{click:t.saveIMG}},[t._v("保存")]),t._v(" "),n("a-button",{staticStyle:{width:"120px","margin-left":"20px"},attrs:{size:"large"},on:{click:t.eraserClick}},[t._v("\n      "+t._s(t.isEraser?"正在使用橡皮":"橡皮")+"\n    ")]),t._v(" "),n("a-button",{staticStyle:{width:"120px",float:"right"},attrs:{icon:"delete",size:"large",type:"danger"},on:{click:function(e){t.canvas.option.control.clearCanvas()}}},[t._v("\n      清空\n    ")])],1)])},staticRenderFns:[]};var f={name:"CompetitorView",components:{Board:n("C7Lr")(v,u,!1,function(t){n("ymjI")},"data-v-40f6e449",null).exports}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("Board")],1)},staticRenderFns:[]};var j=n("C7Lr")(f,m,!1,function(t){n("+yLu")},"data-v-d497add2",null).exports,p={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var g=n("C7Lr")({name:"JudgeView"},p,!1,function(t){n("AV0J")},"data-v-070f84ee",null).exports,W={name:"Square",data:function(){return{imgSrc:null}},mounted:function(){var t=this;WS.onmessage=function(e){var n=JSON.parse(e.data);10===n.code&&(t.imgSrc=n.data)}}},y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[this.imgSrc?e("img",{attrs:{src:this.imgSrc,alt:""}}):this._e()])},staticRenderFns:[]};var x=n("C7Lr")(W,y,!1,function(t){n("plkq")},"data-v-23fa5587",null).exports;s.default.use(o.a);var b=new o.a({routes:[{path:"/",name:"PublicIndex",component:h},{path:"/competitor",name:"CompetitorView",component:j},{path:"/judge",name:"JudgeView",component:g},{path:"/square",name:"Square",component:x}]}),k=n("mffo"),w=n.n(k),C=(n("Jq5M"),n("aozt")),S=n.n(C);s.default.config.productionTip=!1,s.default.use(w.a),s.default.prototype.$axios=S.a,s.default.prototype.API="",window.WS=null,new s.default({el:"#app",router:b,components:{App:a},template:"<App/>"})},VotE:function(t,e){},fSkL:function(t,e,n){var s={"./af":"1OrJ","./af.js":"1OrJ","./ar":"bHl5","./ar-dz":"qFyv","./ar-dz.js":"qFyv","./ar-kw":"OhBR","./ar-kw.js":"OhBR","./ar-ly":"3AjD","./ar-ly.js":"3AjD","./ar-ma":"sFwh","./ar-ma.js":"sFwh","./ar-sa":"gg0N","./ar-sa.js":"gg0N","./ar-tn":"lqw4","./ar-tn.js":"lqw4","./ar.js":"bHl5","./az":"xLUF","./az.js":"xLUF","./be":"NWv/","./be.js":"NWv/","./bg":"G9eV","./bg.js":"G9eV","./bm":"zaEJ","./bm.js":"zaEJ","./bn":"/icp","./bn.js":"/icp","./bo":"UyM9","./bo.js":"UyM9","./br":"G5xs","./br.js":"G5xs","./bs":"9h8A","./bs.js":"9h8A","./ca":"8ccl","./ca.js":"8ccl","./cs":"TEiJ","./cs.js":"TEiJ","./cv":"7EVA","./cv.js":"7EVA","./cy":"H6w8","./cy.js":"H6w8","./da":"MSIt","./da.js":"MSIt","./de":"Rl+D","./de-at":"30Vd","./de-at.js":"30Vd","./de-ch":"KKU8","./de-ch.js":"KKU8","./de.js":"Rl+D","./dv":"+DOJ","./dv.js":"+DOJ","./el":"8nDw","./el.js":"8nDw","./en-SG":"1hne","./en-SG.js":"1hne","./en-au":"ZsCN","./en-au.js":"ZsCN","./en-ca":"rHyc","./en-ca.js":"rHyc","./en-gb":"ehFk","./en-gb.js":"ehFk","./en-ie":"Hxoc","./en-ie.js":"Hxoc","./en-il":"oEKo","./en-il.js":"oEKo","./en-nz":"SfkL","./en-nz.js":"SfkL","./eo":"UhWX","./eo.js":"UhWX","./es":"JJW5","./es-do":"LWvi","./es-do.js":"LWvi","./es-us":"RzRn","./es-us.js":"RzRn","./es.js":"JJW5","./et":"pjM/","./et.js":"pjM/","./eu":"oBFE","./eu.js":"oBFE","./fa":"z8Fc","./fa.js":"z8Fc","./fi":"j+B7","./fi.js":"j+B7","./fo":"MuUW","./fo.js":"MuUW","./fr":"CZ8n","./fr-ca":"nDiE","./fr-ca.js":"nDiE","./fr-ch":"T2mj","./fr-ch.js":"T2mj","./fr.js":"CZ8n","./fy":"+eCN","./fy.js":"+eCN","./ga":"6KMf","./ga.js":"6KMf","./gd":"Osat","./gd.js":"Osat","./gl":"3uJi","./gl.js":"3uJi","./gom-latn":"kQyN","./gom-latn.js":"kQyN","./gu":"C85o","./gu.js":"C85o","./he":"Uaie","./he.js":"Uaie","./hi":"KLVO","./hi.js":"KLVO","./hr":"/AQ7","./hr.js":"/AQ7","./hu":"neNx","./hu.js":"neNx","./hy-am":"HL0q","./hy-am.js":"HL0q","./id":"fVYV","./id.js":"fVYV","./is":"pUHy","./is.js":"pUHy","./it":"N5fZ","./it-ch":"KCG7","./it-ch.js":"KCG7","./it.js":"N5fZ","./ja":"bVIB","./ja.js":"bVIB","./jv":"NpB+","./jv.js":"NpB+","./ka":"8RqC","./ka.js":"8RqC","./kk":"pcbE","./kk.js":"pcbE","./km":"o5og","./km.js":"o5og","./kn":"BKte","./kn.js":"BKte","./ko":"vztA","./ko.js":"vztA","./ku":"OmHn","./ku.js":"OmHn","./ky":"gQFs","./ky.js":"gQFs","./lb":"sJOA","./lb.js":"sJOA","./lo":"Wg2E","./lo.js":"Wg2E","./lt":"N5Ie","./lt.js":"N5Ie","./lv":"Z/KU","./lv.js":"Z/KU","./me":"6nQR","./me.js":"6nQR","./mi":"dZ9v","./mi.js":"dZ9v","./mk":"8ttA","./mk.js":"8ttA","./ml":"TFUT","./ml.js":"TFUT","./mn":"Rtcs","./mn.js":"Rtcs","./mr":"ZrND","./mr.js":"ZrND","./ms":"Uszi","./ms-my":"B+3a","./ms-my.js":"B+3a","./ms.js":"Uszi","./mt":"f+DN","./mt.js":"f+DN","./my":"7hhd","./my.js":"7hhd","./nb":"O+uN","./nb.js":"O+uN","./ne":"xB1H","./ne.js":"xB1H","./nl":"pyzp","./nl-be":"6XY9","./nl-be.js":"6XY9","./nl.js":"pyzp","./nn":"wWYI","./nn.js":"wWYI","./pa-in":"khMS","./pa-in.js":"khMS","./pl":"J+lf","./pl.js":"J+lf","./pt":"imZp","./pt-br":"yh7C","./pt-br.js":"yh7C","./pt.js":"imZp","./ro":"/ydL","./ro.js":"/ydL","./ru":"XA72","./ru.js":"XA72","./sd":"K+sy","./sd.js":"K+sy","./se":"HXCg","./se.js":"HXCg","./si":"JhyT","./si.js":"JhyT","./sk":"QL3+","./sk.js":"QL3+","./sl":"KbOk","./sl.js":"KbOk","./sq":"jkQm","./sq.js":"jkQm","./sr":"vGLH","./sr-cyrl":"lZcv","./sr-cyrl.js":"lZcv","./sr.js":"vGLH","./ss":"ikBz","./ss.js":"ikBz","./sv":"gbWe","./sv.js":"gbWe","./sw":"YR+a","./sw.js":"YR+a","./ta":"otVD","./ta.js":"otVD","./te":"3YuF","./te.js":"3YuF","./tet":"IJME","./tet.js":"IJME","./tg":"iKfg","./tg.js":"iKfg","./th":"v87T","./th.js":"v87T","./tl-ph":"otiP","./tl-ph.js":"otiP","./tlh":"L/GK","./tlh.js":"L/GK","./tr":"phcV","./tr.js":"phcV","./tzl":"rgrh","./tzl.js":"rgrh","./tzm":"1pHS","./tzm-latn":"q7e0","./tzm-latn.js":"q7e0","./tzm.js":"1pHS","./ug-cn":"tsGA","./ug-cn.js":"tsGA","./uk":"01SB","./uk.js":"01SB","./ur":"jayG","./ur.js":"jayG","./uz":"k3sX","./uz-latn":"nmSA","./uz-latn.js":"nmSA","./uz.js":"k3sX","./vi":"KTvP","./vi.js":"KTvP","./x-pseudo":"dccK","./x-pseudo.js":"dccK","./yo":"IAhR","./yo.js":"IAhR","./zh-cn":"5Spc","./zh-cn.js":"5Spc","./zh-hk":"ECSc","./zh-hk.js":"ECSc","./zh-tw":"hH/4","./zh-tw.js":"hH/4"};function i(t){return n(a(t))}function a(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(s)},i.resolve=a,t.exports=i,i.id="fSkL"},p8Ud:function(t,e){},plkq:function(t,e){},ymjI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7f5b1c3f753d8feb207d.js.map